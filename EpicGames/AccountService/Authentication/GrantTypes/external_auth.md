## Account Service - Auth Grant: external_auth

Login with an External Accounts like Nintendo or Google.

### Body

`external_auth_type`: The Token issued by the external auth provider \
`external_auth_token`: See below

| Type                       | is Internal | is EAS | Login Allowed | Obtaining Token                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| -------------------------- | ----------- | ------ | ------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| google                     | ✅          |        | ✅            | 1. Open the [Google Web Login](https://accounts.google.com/o/oauth2/v2/auth?client_id=81931294547-ict6llss8611g9nglndn2bnln48bo59d.apps.googleusercontent.com&response_type=code&scope=openid&redirect_uri=https://accounts.epicgames.com/OAuthAuthorized) <br/> 2. Use the Google Account you want to login with to Epic Games <br/> 3. Get the `code` from the URL when the Epic Games Error shows up (Must get URL Decoded before using it!)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| google_id_token            | ✅          |        | ✅            | 1. Open the [Google Web Login](https://accounts.google.com/o/oauth2/v2/auth?client_id=81931294547-ict6llss8611g9nglndn2bnln48bo59d.apps.googleusercontent.com&response_type=id_token&scope=openid&nonce=egs&redirect_uri=https://accounts.epicgames.com/OAuthAuthorized) <br/> 2. Use the Google Account you want to login with to Epic Games <br/> 3. Get the `id_token` from the URL when the Epic Games Error shows up                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| wegame_rail_session_ticket | ✅          |        |               | Note: requires client credentials to have `account:oauth:ext_auth:wegame:rail_session_ticket` to work properly                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| internal                   | ✅          |        | ✅            | An account id and an internal auth key seperated by a colon (e.g. `e4ea869b3d6841f6ab2346e9b5e72648:f048e0700a604714b0a2b117320c5cab`). The only known way to obtain an internal auth key is via the [Create Account](../../Account/CreateAccount.md) endpoint.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| apple_id_token             | ✅          |        | ✅            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| apple                      | ✅          |        | ✅            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| nintendo                   | ✅          |        | ✅            | 1. Login to [Nintendo](https://accounts.nintendo.com/login) <br/> 2. Get the `NASID` cookie <br/> 3. Request [this URL](https://accounts.nintendo.com/connect/1.0.0/authorize/consent?client_id=1f6a6a4806931686&redirect_uri=https%3A%2F%2Faccounts.epicgames.com%2FOAuthAuthorized&display=popup&state=egs&force_verify=true&scope=openid+user.screenName&response_type=code) with the cookie <br/> 4. Get the `code` from the url params or the `location` header (If you dont follow redirects) <br/><br/> Note 1: You dont need to follow the redirects<br/>Note 2: Logging out of the Nintendo Website invalidates the `NASID`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| nintendo_id_token          | ✅          | ✅     | ✅            | 1. Login to [Nintendo](https://accounts.nintendo.com/login) <br/> 2. Get the `NASID` cookie <br/> 3. Request [this URL](https://accounts.nintendo.com/connect/1.0.0/authorize/consent?client_id=1f6a6a4806931686&redirect_uri=https%3A%2F%2Faccounts.epicgames.com%2FOAuthAuthorized&display=popup&state=egs&force_verify=true&scope=openid+user.screenName&response_type=id_token) with the cookie (if using EAS, replace the client_id and the redirect_url with the respective values of the client setup in dev portal) <br/> 4. Get the `id_token` from the url or the `location` header (If you dont follow redirects) <br/><br/> Note 1: You dont need to follow the redirects<br/>Note 2: Logging out of the Nintendo Website invalidates the `NASID`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| nsa_id_token               | ✅          | ✅     | ✅            | https://github.com/kinnay/NintendoClients/wiki/BAAS-Server#post-100login <br/><br/> For INTERNAL: Use an appAuthNToken for `010025400aece000` or `01005ee0036ec000` <br/> For EAS: Use an appAuthNToken for the app id configured in dev portal.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| psn                        | ✅          |        | ✅            | 1. Login to [PlayStation](https://id.sonyentertainmentnetwork.com/id/management_ca/) <br/> 2. Grab your `npsso` cookie from [here](https://ca.account.sony.com/api/v1/ssocookie) <br/> 3. Request [this URL](https://ca.account.sony.com/api/v1/oauth/authorize?client_id=CLIENT_ID&redirect_uri=REDIRECT_URI&response_type=code&scope=psn:s2s) with the cookie, replacing `CLIENT_ID` and `REDIRECT_URI` with the details of the client's PSN configuration. The code will be in both the `X-NP-GRANT-CODE` header and the `code` query paramater of the location header.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| psnToken                   | ✅          | ✅     | ✅            | 1. Login to [PlayStation](https://id.sonyentertainmentnetwork.com/id/management_ca/) <br/> 2. Grab your `npsso` cookie from [here](https://ca.account.sony.com/api/v1/ssocookie) <br/><br/> For INTERNAL: <br/> 3. Send an `application/x-www-form-urlencoded` POST request to [this URL](https://auth.api.sonyentertainmentnetwork.com/2.0/oauth/token) with the cookie and a post body of `client_id={CLIENT_ID}&client_secret={CLIENT_SECRET}&grant_type=sso_cookie&scope={ANY_SCOPE}`. <br/><br/> For EAS: <br/> 3. Request either [v1](https://ca.account.sony.com/api/v1/oauth/authorize?client_id=CLIENT_ID&redirect_uri=REDIRECT_URI&response_type=code&scope=openid) or [v3](https://ca.account.sony.com/api/authz/v3/oauth/authorize?client_id=CLIENT_ID&redirect_uri=REDIRECT_URI&response_type=code&scope=openid)'s authorize endpoint with the cookie, replacing `CLIENT_ID` and `REDIRECT_URI` with the details of the client's PSN configuration. The code will be in the `code` query paramater of the location header. <br/> 4. Send an `application/x-www-form-urlencoded` POST request to either [v1](https://auth.api.sonyentertainmentnetwork.com/2.0/oauth/token) or [v3](https://ca.account.sony.com/api/authz/v3/oauth/token)'s token endpoint with a post body of `client_id={CLIENT_ID}&client_secret={CLIENT_SECRET}&grant_type=authorization_code&code={CODE}&redirect_uri={REDIRECT_URI}`. The token will be the `id_token` field. |
| ps5                        | ✅          |        | ✅            | 1. Login to [PlayStation](https://id.sonyentertainmentnetwork.com/id/management_ca/) <br/> 2. Grab your `npsso` cookie from [here](https://ca.account.sony.com/api/v1/ssocookie) <br/> 3. Request [this URL](https://ca.account.sony.com/api/authz/v3/oauth/authorize?client_id=CLIENT_ID&redirect_uri=REDIRECT_URI&response_type=code&scope=psn:s2s) with the cookie, replacing `CLIENT_ID` and `REDIRECT_URI` with the details of the client's PSN configuration. The code will be in the `code` query paramater of the location header.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| steam_encrypted_appticket  |             | ❔     | ✅            | https://github.com/DoctorMcKay/node-steam-user#createencryptedappticketappid-userdata-callback <br/><br/> Note: Deprecated in favor of `steam_session_ticket`. Login is blocked for all known clients.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| steam_openid               | ✅          | ❔     | ✅            | Note: Login is blocked for all known clients.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| steam_session_ticket       |             | ✅     | ✅            | https://partner.steamgames.com/doc/api/ISteamUser#GetAuthTicketForWebApi                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| xbl_token                  | ✅          |        | ✅            | Get a user OAuth access token for a Microsoft Azure application with the `consumers` tenant and the `XboxLive.signin` scope.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| xbl_xtoken                 | ✅          | ✅     | ✅            | https://gist.github.com/Jaren8r/49bc807e0a0f269b91f6d31f3381a0ea <br/><br/> For INTERNAL: Relying party is `rp://epicgames.com/`. Currently gives a database timeout error for an unknown reason. <br/> For EAS: Use the relying party of the game configured in dev portal.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| xbl                        | ✅          |        | ✅            | 1. Login to Microsoft <br/> 2. Request [this URL](https://login.live.com/oauth20_authorize.srf?client_id=82023151-c27d-4fb5-8551-10c10724a55e&redirect_uri=https%3A%2F%2Faccounts.epicgames.com%2FOAuthAuthorized&state=&scope=xboxlive.signin&service_entity=undefined&force_verify=true&response_type=code&display=popup) but dont follow the redirect <br/> 3. Get the `code` from the `location` header                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| facebook                   | ✅          |        | ✅            | 1. Setup an OAuth application @ https://developers.facebook.com/apps and assign it to a business. <br/> 2. Go to `https://www.facebook.com/v4.0/dialog/oauth?client_id={CLIENT_ID}&redirect_uri={REDIRECT_URI}&scope=email%2Cuser_friends&response_type=token` <br/> 4. Get the `access_token` from the hash part of the location header. <br/><br/> Note: Facebook gives each business account different user ids for the same user (e.g. if you connected your facebook account through epicgames.com, you will not be able to login with a token for your oauth application).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| github                     | ✅          |        |               | 1. Login to [Github](https://github.com/login) <br/> 2. Get the `user_session` cookie <br/> 3. Request [this URL](https://github.com/login/oauth/authorize?client_id=5f5146bcf909bdf47f12&response_type=code) with the cookie <br/> 4. Get the `code` from the url or the `location` header (If you dont follow redirects)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| ubisoft                    | ✅          |        |               | 1. Open the [Link Ubisoft](https://www.epicgames.com/id/link/ubisoft) page and click continue <br/> 2. Login to Ubisoft <br/> 3. Capture the request to https://epicgames.com/id/api/state/:state and get the `code` query paramater                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| twitch                     | ✅          |        |               | 1. Login to [Twitch](https://www.twitch.tv/login) <br/> 2. Open [this Url](http://id.twitch.tv/oauth2/authorize?client_id=saactj7j6kcf5ogqcv4n6zsgx32sy41&redirect_uri=https%3A%2F%2Faccounts.epicgames.com%2FOAuthAuthorized&state=&scope=user_read%20viewing_activity_read&service_entity=undefined&force_verify=true&response_type=code&display=popup) <br/> 3. Accept the Access <br/> 4. Get the `code` query from the URL you have been redirected to                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| vk                         | ✅          |        | ✅            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| lego_id_token              | ✅          |        | ✅            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| autodesk_id_token              | ✅          |        | ✅            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
